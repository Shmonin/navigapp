# Frontend Requirements: –ù–∞–≤–∏–≥–∞–ø–ø Web App

**–°—Ç–∞—Ç—É—Å:** üöÄ **Phase 1 –ó–∞–≤–µ—Ä—à–µ–Ω–∞ - –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–∞**

## üìä –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ (Phase 1 - –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- **‚úÖ React + TypeScript Setup** - Vite project —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ Vercel
- **‚úÖ Telegram WebApp Integration** - @twa-dev/sdk –ø–æ–¥–∫–ª—é—á–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **‚úÖ Theme Integration** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ Telegram —Ç–µ–º—ã
- **‚úÖ Basic Routing** - React Router –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- **‚úÖ State Management** - Zustand store –≥–æ—Ç–æ–≤
- **‚úÖ Component Structure** - –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **‚úÖ API Service Layer** - Axios –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è API –≤—ã–∑–æ–≤–æ–≤
- **‚úÖ Mobile-First Styling** - Tailwind CSS –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- **‚úÖ Production Deployment** - https://navigapp.vercel.app
- **‚úÖ CSP & Security Headers** - –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –¥–ª—è Telegram WebApp

### üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ (Phase 2 - UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
- **‚è≥ Onboarding Flow** - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫—Ä–∞–Ω –∏ onboarding
- **‚è≥ Page Builder Interface** - –ü–æ—à–∞–≥–æ–≤—ã–π –º–∞—Å—Ç–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü
- **‚è≥ Card Management UI** - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏
- **‚è≥ Block Types Components** - Vertical list, grid, horizontal scroll
- **‚è≥ Preview Mode** - –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç—Ä–∞–Ω–∏—Ü
- **‚è≥ Settings Interface** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **‚è≥ Analytics Dashboard** - –ë–∞–∑–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### üìã –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ (Phase 3)
- **üìÖ Subscription Management** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ Pro
- **üìÖ Payment Integration** - T-Bank payment forms
- **üìÖ Advanced Analytics** - –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –≥—Ä–∞—Ñ–∏–∫–∏
- **üìÖ Export/Import** - –≠–∫—Å–ø–æ—Ä—Ç –∏ –∏–º–ø–æ—Ä—Ç —Å—Ç—Ä–∞–Ω–∏—Ü
- **üìÖ Collaboration Tools** - –°–æ–≤–º–µ—Å—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–∞–¥ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏

## üåê –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

**Deployed URL:** https://navigapp.vercel.app
**Telegram Bot:** [@Navigapp_bot](https://t.me/Navigapp_bot)

### ‚úÖ –†–∞–±–æ—Ç–∞—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **App.tsx** - –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å Telegram WebApp –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π
- **AppRouter** - –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **LoadingScreen** - –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏
- **useTelegramWebApp hook** - Hook –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram WebApp API
- **Theme integration** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤–æ–π —Å—Ö–µ–º—ã Telegram

### üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ (Phase 2)
- **Dashboard** - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —Å–ø–∏—Å–∫–æ–º —Å—Ç—Ä–∞–Ω–∏—Ü –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **PageBuilder** - –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü
- **PageEditor** - –†–µ–¥–∞–∫—Ç–æ—Ä —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
- **PublicPage** - –ü—É–±–ª–∏—á–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç—Ä–∞–Ω–∏—Ü (/p/:slug)
- **Settings** - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## 1. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### 1.1 –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **Framework:** React 18+ —Å TypeScript 5.x
- **Build Tool:** Vite 5.x
- **Styling:** Tailwind CSS 3.x + CSS Modules
- **State Management:** Zustand 4.x
- **Router:** React Router 6.x
- **Forms:** React Hook Form + Zod validation
- **HTTP Client:** Axios —Å interceptors
- **Telegram Integration:** @twa-dev/sdk
- **UI Components:** Headless UI + Custom components
- **Icons:** Lucide React
- **Animations:** Framer Motion
- **Deployment:** Vercel

### 1.2 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã
- **Component-based** –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **Mobile-first** responsive design
- **Progressive Enhancement** –¥–ª—è Telegram Mini Apps
- **Atomic Design** methodology
- **Custom Hooks** –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –ª–æ–≥–∏–∫–∏
- **Error Boundaries** –¥–ª—è graceful error handling

## 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ components/           # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ ui/              # –ë–∞–∑–æ–≤—ã–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ forms/           # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ñ–æ—Ä–º
‚îÇ   ‚îú‚îÄ‚îÄ cards/           # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∫–∞—Ä—Ç–æ—á–µ–∫
‚îÇ   ‚îî‚îÄ‚îÄ layout/          # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–∑–º–µ—Ç–∫–∏
‚îú‚îÄ‚îÄ pages/               # –°—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ hooks/               # Custom hooks
‚îú‚îÄ‚îÄ store/               # Zustand stores
‚îú‚îÄ‚îÄ services/            # API —Å–µ—Ä–≤–∏—Å—ã
‚îú‚îÄ‚îÄ utils/               # –£—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ types/               # TypeScript —Ç–∏–ø—ã
‚îú‚îÄ‚îÄ constants/           # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îî‚îÄ‚îÄ assets/              # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã
```

## 3. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

### 3.1 –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

#### 3.1.1 OnboardingScreen.tsx
–û–Ω–±–æ—Ä–¥–∏–Ω–≥ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

```typescript
interface OnboardingScreenProps {
  onComplete: () => void;
}

interface OnboardingStep {
  id: string;
  title: string;
  description: string;
  illustration: string;
  action: {
    label: string;
    onClick: () => void;
  };
}

const OnboardingScreen: React.FC<OnboardingScreenProps> = ({ onComplete }) => {
  const [currentStep, setCurrentStep] = useState(0);
  const [isCompleting, setIsCompleting] = useState(false);
  
  const steps: OnboardingStep[] = [
    {
      id: 'value',
      title: '–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –Ω–∞–≤–∏–≥–∞—Ü–∏—é –¥–ª—è –≤–∞—à–∏—Ö –∫–∞–Ω–∞–ª–æ–≤',
      description: '–£–ø—Ä–æ—Å—Ç–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –≤–∞–∂–Ω—ã–º –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º –∏ –∫—É—Ä—Å–∞–º',
      illustration: '/illustrations/value.svg',
      action: {
        label: '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å',
        onClick: () => setCurrentStep(1)
      }
    },
    {
      id: 'instruction',
      title: '–ö–∞–∫ –∑–∞–ø–æ–ª–Ω–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É',
      description: '–î–æ–±–∞–≤—å—Ç–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–ª–æ–∫–æ–≤ –∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø–æ—Å—Ç—ã',
      illustration: '/illustrations/instruction.svg',
      action: {
        label: '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å',
        onClick: () => setCurrentStep(2)
      }
    },
    {
      id: 'publish',
      title: '–ö–∞–∫ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å',
      description: '–†–∞–∑–º–µ—Å—Ç–∏—Ç–µ —Å—Å—ã–ª–∫—É –≤ –∫–∞–Ω–∞–ª–µ –∏ –∑–∞–∫—Ä–µ–ø–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ',
      illustration: '/illustrations/publish.svg',
      action: {
        label: '–°–æ–∑–¥–∞—Ç—å —Å–≤–æ—é —Å—Ç—Ä–∞–Ω–∏—á–∫—É',
        onClick: handleComplete
      }
    }
  ];
  
  return (
    <div className="onboarding-container">
      {/* –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ */}
    </div>
  );
};
```

#### 3.1.2 PageBuilderScreen.tsx
–ú–∞—Å—Ç–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü

```typescript
interface PageBuilderState {
  currentStep: number;
  totalSteps: number;
  pageData: {
    title: string;
    description?: string;
    blocks: BlockData[];
  };
  isLoading: boolean;
  errors: Record<string, string>;
}

interface BlockData {
  id: string;
  type: 'vertical_list' | 'grid' | 'horizontal_scroll' | 'feed';
  title?: string;
  description?: string;
  cards: CardData[];
}

interface CardData {
  id: string;
  title: string;
  description?: string;
  iconUrl?: string;
  backgroundImageUrl?: string;
  linkUrl?: string;
  linkType: 'external' | 'internal';
  internalPageId?: string;
}

const PageBuilderScreen: React.FC = () => {
  const [state, setState] = useState<PageBuilderState>({
    currentStep: 1,
    totalSteps: 3,
    pageData: {
      title: '',
      blocks: []
    },
    isLoading: false,
    errors: {}
  });
  
  const { user } = useAuth();
  const { createPage } = usePageService();
  
  return (
    <div className="page-builder">
      <ProgressBar 
        current={state.currentStep} 
        total={state.totalSteps} 
      />
      
      {state.currentStep === 1 && (
        <TitleStep 
          value={state.pageData.title}
          onChange={(title) => updatePageData({ title })}
          onNext={() => setState(s => ({ ...s, currentStep: 2 }))}
        />
      )}
      
      {state.currentStep === 2 && (
        <CardsStep 
          blocks={state.pageData.blocks}
          onChange={(blocks) => updatePageData({ blocks })}
          onNext={() => setState(s => ({ ...s, currentStep: 3 }))}
          userLimits={getUserLimits(user)}
        />
      )}
      
      {state.currentStep === 3 && (
        <PreviewStep 
          pageData={state.pageData}
          onEdit={() => setState(s => ({ ...s, currentStep: 2 }))}
          onPublish={handlePublish}
          isLoading={state.isLoading}
        />
      )}
    </div>
  );
};
```

#### 3.1.3 PageViewScreen.tsx
–ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–∑–¥–∞–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

```typescript
interface PageViewProps {
  pageId: string;
  isOwner: boolean;
}

const PageViewScreen: React.FC<PageViewProps> = ({ pageId, isOwner }) => {
  const { page, loading, error } = usePage(pageId);
  const { trackView, trackClick } = useAnalytics();
  
  useEffect(() => {
    if (page) {
      trackView(pageId);
    }
  }, [page, pageId]);
  
  if (loading) return <PageSkeleton />;
  if (error) return <ErrorState error={error} />;
  if (!page) return <NotFoundState />;
  
  return (
    <div className="page-view">
      {isOwner && (
        <OwnerActions>
          <IconButton 
            icon={Settings}
            onClick={() => navigate('/profile')}
            variant="ghost"
          />
          <IconButton 
            icon={Edit}
            onClick={() => navigate(`/pages/${pageId}/edit`)}
            variant="primary"
          />
        </OwnerActions>
      )}
      
      <PageHeader 
        title={page.title}
        description={page.description}
      />
      
      <PageBlocks 
        blocks={page.blocks}
        onCardClick={(cardId) => {
          trackClick(pageId, cardId);
          // Handle navigation
        }}
      />
      
      <Footer>
        <FooterText>
          –°—Ç—Ä–∞–Ω–∏—á–∫–∞ —Å–æ–∑–¥–∞–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –ù–∞–≤–∏–≥–∞–ø–ø
        </FooterText>
        <Button 
          variant="outline"
          onClick={() => navigate('/create')}
        >
          –°–æ–∑–¥–∞—Ç—å —Å–≤–æ—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
        </Button>
      </Footer>
    </div>
  );
};
```

### 3.2 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∫–∞—Ä—Ç–æ—á–µ–∫

#### 3.2.1 VerticalListCard.tsx

```typescript
interface VerticalListCardProps {
  title: string;
  description?: string;
  iconUrl?: string;
  onClick: () => void;
  isEditing?: boolean;
  onEdit?: () => void;
  onDelete?: () => void;
}

const VerticalListCard: React.FC<VerticalListCardProps> = ({
  title,
  description,
  iconUrl,
  onClick,
  isEditing,
  onEdit,
  onDelete
}) => {
  const handleClick = () => {
    if (isEditing) return;
    
    // Haptic feedback
    if (window.Telegram?.WebApp?.HapticFeedback) {
      window.Telegram.WebApp.HapticFeedback.impactOccurred('light');
    }
    
    onClick();
  };
  
  return (
    <motion.div
      className="vertical-card"
      whileTap={{ scale: 0.98 }}
      onClick={handleClick}
      layout
    >
      <div className="card-content">
        {iconUrl && (
          <div className="card-icon">
            <img src={iconUrl} alt="" />
          </div>
        )}
        
        <div className="card-text">
          <h3 className="card-title">{title}</h3>
          {description && (
            <p className="card-description">{description}</p>
          )}
        </div>
        
        {isEditing && (
          <CardActions>
            <IconButton icon={Edit} onClick={onEdit} size="sm" />
            <IconButton icon={Trash} onClick={onDelete} size="sm" variant="danger" />
          </CardActions>
        )}
      </div>
    </motion.div>
  );
};
```

#### 3.2.2 GridCard.tsx (Pro –≤–µ—Ä—Å–∏—è)

```typescript
interface GridCardProps {
  title: string;
  description?: string;
  backgroundImageUrl?: string;
  onClick: () => void;
}

const GridCard: React.FC<GridCardProps> = ({
  title,
  description,
  backgroundImageUrl,
  onClick
}) => {
  return (
    <motion.div
      className="grid-card"
      style={{
        backgroundImage: backgroundImageUrl ? `url(${backgroundImageUrl})` : undefined
      }}
      whileTap={{ scale: 0.95 }}
      onClick={onClick}
    >
      <div className="grid-card-overlay">
        <div className="grid-card-content">
          <h3 className="grid-card-title">{title}</h3>
          {description && (
            <p className="grid-card-description">{description}</p>
          )}
        </div>
      </div>
    </motion.div>
  );
};
```

### 3.3 UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 3.3.1 Button.tsx

```typescript
interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'primary' | 'secondary' | 'outline' | 'ghost' | 'danger';
  size?: 'sm' | 'md' | 'lg';
  isLoading?: boolean;
  haptic?: boolean;
  children: React.ReactNode;
}

const Button: React.FC<ButtonProps> = ({
  variant = 'primary',
  size = 'md',
  isLoading = false,
  haptic = true,
  children,
  onClick,
  disabled,
  className,
  ...props
}) => {
  const handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {
    if (haptic && window.Telegram?.WebApp?.HapticFeedback) {
      window.Telegram.WebApp.HapticFeedback.impactOccurred('medium');
    }
    
    onClick?.(e);
  };
  
  const buttonClasses = cn(
    'btn',
    `btn--${variant}`,
    `btn--${size}`,
    {
      'btn--loading': isLoading,
      'btn--disabled': disabled || isLoading
    },
    className
  );
  
  return (
    <button
      className={buttonClasses}
      onClick={handleClick}
      disabled={disabled || isLoading}
      {...props}
    >
      {isLoading && <Spinner size="sm" />}
      <span className={isLoading ? 'opacity-0' : ''}>{children}</span>
    </button>
  );
};
```

#### 3.3.2 ProgressBar.tsx

```typescript
interface ProgressBarProps {
  current: number;
  total: number;
  showSteps?: boolean;
}

const ProgressBar: React.FC<ProgressBarProps> = ({
  current,
  total,
  showSteps = true
}) => {
  const progress = (current / total) * 100;
  
  return (
    <div className="progress-container">
      {showSteps && (
        <div className="progress-steps">
          {Array.from({ length: total }, (_, i) => (
            <div
              key={i}
              className={cn(
                'progress-step',
                {
                  'progress-step--completed': i + 1 < current,
                  'progress-step--current': i + 1 === current,
                  'progress-step--upcoming': i + 1 > current
                }
              )}
            >
              {i + 1}
            </div>
          ))}
        </div>
      )}
      
      <div className="progress-bar">
        <motion.div
          className="progress-fill"
          style={{ width: `${progress}%` }}
          initial={{ width: 0 }}
          animate={{ width: `${progress}%` }}
          transition={{ duration: 0.3 }}
        />
      </div>
      
      <div className="progress-text">
        –®–∞–≥ {current} –∏–∑ {total}
      </div>
    </div>
  );
};
```

## 4. State Management

### 4.1 Zustand Stores

#### 4.1.1 useAuthStore.ts

```typescript
interface User {
  id: string;
  telegramId: string;
  username?: string;
  firstName?: string;
  subscriptionType: 'free' | 'pro';
  subscriptionExpiresAt?: string;
  trialUsed: boolean;
}

interface AuthState {
  user: User | null;
  isAuthenticated: boolean;
  isLoading: boolean;
  error: string | null;
  
  // Actions
  login: (initData: string) => Promise<void>;
  logout: () => void;
  refreshToken: () => Promise<void>;
  updateProfile: (data: Partial<User>) => Promise<void>;
}

const useAuthStore = create<AuthState>((set, get) => ({
  user: null,
  isAuthenticated: false,
  isLoading: false,
  error: null,
  
  login: async (initData: string) => {
    set({ isLoading: true, error: null });
    
    try {
      const response = await authService.login(initData);
      const { user, token, refreshToken } = response.data;
      
      // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
      localStorage.setItem('token', token);
      localStorage.setItem('refreshToken', refreshToken);
      
      set({
        user,
        isAuthenticated: true,
        isLoading: false
      });
    } catch (error) {
      set({
        error: error.message,
        isLoading: false
      });
    }
  },
  
  logout: () => {
    localStorage.removeItem('token');
    localStorage.removeItem('refreshToken');
    
    set({
      user: null,
      isAuthenticated: false,
      error: null
    });
  },
  
  refreshToken: async () => {
    const refreshToken = localStorage.getItem('refreshToken');
    if (!refreshToken) return;
    
    try {
      const response = await authService.refresh(refreshToken);
      const { token } = response.data;
      
      localStorage.setItem('token', token);
    } catch (error) {
      get().logout();
    }
  },
  
  updateProfile: async (data: Partial<User>) => {
    const response = await userService.updateProfile(data);
    set(state => ({
      user: { ...state.user!, ...response.data }
    }));
  }
}));
```

#### 4.1.2 usePagesStore.ts

```typescript
interface PageState {
  pages: Page[];
  currentPage: Page | null;
  isLoading: boolean;
  error: string | null;
  
  // Actions
  fetchPages: () => Promise<void>;
  fetchPage: (id: string) => Promise<void>;
  createPage: (data: CreatePageData) => Promise<Page>;
  updatePage: (id: string, data: UpdatePageData) => Promise<Page>;
  deletePage: (id: string) => Promise<void>;
  publishPage: (id: string) => Promise<void>;
}

const usePagesStore = create<PageState>((set, get) => ({
  pages: [],
  currentPage: null,
  isLoading: false,
  error: null,
  
  fetchPages: async () => {
    set({ isLoading: true });
    
    try {
      const response = await pageService.getPages();
      set({
        pages: response.data.pages,
        isLoading: false,
        error: null
      });
    } catch (error) {
      set({
        error: error.message,
        isLoading: false
      });
    }
  },
  
  createPage: async (data: CreatePageData) => {
    const response = await pageService.createPage(data);
    const newPage = response.data;
    
    set(state => ({
      pages: [...state.pages, newPage]
    }));
    
    return newPage;
  }
  
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ actions
}));
```

## 5. Custom Hooks

### 5.1 useTelegramWebApp.ts

```typescript
interface TelegramWebApp {
  initData: string;
  initDataUnsafe: any;
  version: string;
  platform: string;
  colorScheme: 'light' | 'dark';
  themeParams: {
    bg_color: string;
    text_color: string;
    hint_color: string;
    link_color: string;
    button_color: string;
    button_text_color: string;
  };
  isExpanded: boolean;
  viewportHeight: number;
  viewportStableHeight: number;
  
  // Methods
  ready: () => void;
  expand: () => void;
  close: () => void;
  enableClosingConfirmation: () => void;
  disableClosingConfirmation: () => void;
  
  // Events
  onEvent: (eventType: string, eventHandler: () => void) => void;
  offEvent: (eventType: string, eventHandler: () => void) => void;
  
  // Buttons
  MainButton: {
    text: string;
    color: string;
    textColor: string;
    isVisible: boolean;
    isActive: boolean;
    isProgressVisible: boolean;
    setText: (text: string) => void;
    onClick: (callback: () => void) => void;
    show: () => void;
    hide: () => void;
    enable: () => void;
    disable: () => void;
    showProgress: () => void;
    hideProgress: () => void;
  };
  
  BackButton: {
    isVisible: boolean;
    onClick: (callback: () => void) => void;
    show: () => void;
    hide: () => void;
  };
  
  // Haptic feedback
  HapticFeedback: {
    impactOccurred: (style: 'light' | 'medium' | 'heavy' | 'rigid' | 'soft') => void;
    notificationOccurred: (type: 'error' | 'success' | 'warning') => void;
    selectionChanged: () => void;
  };
}

const useTelegramWebApp = () => {
  const [webApp, setWebApp] = useState<TelegramWebApp | null>(null);
  const [isReady, setIsReady] = useState(false);
  
  useEffect(() => {
    const tg = window.Telegram?.WebApp;
    
    if (tg) {
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
      tg.ready();
      tg.expand();
      
      // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ–º—ã
      document.documentElement.style.setProperty('--tg-theme-bg-color', tg.themeParams.bg_color);
      document.documentElement.style.setProperty('--tg-theme-text-color', tg.themeParams.text_color);
      document.documentElement.style.setProperty('--tg-theme-hint-color', tg.themeParams.hint_color);
      document.documentElement.style.setProperty('--tg-theme-link-color', tg.themeParams.link_color);
      document.documentElement.style.setProperty('--tg-theme-button-color', tg.themeParams.button_color);
      document.documentElement.style.setProperty('--tg-theme-button-text-color', tg.themeParams.button_text_color);
      
      setWebApp(tg);
      setIsReady(true);
    }
  }, []);
  
  const showMainButton = useCallback((text: string, onClick: () => void) => {
    if (webApp?.MainButton) {
      webApp.MainButton.setText(text);
      webApp.MainButton.show();
      webApp.MainButton.onClick(onClick);
    }
  }, [webApp]);
  
  const hideMainButton = useCallback(() => {
    webApp?.MainButton.hide();
  }, [webApp]);
  
  const showBackButton = useCallback((onClick: () => void) => {
    if (webApp?.BackButton) {
      webApp.BackButton.show();
      webApp.BackButton.onClick(onClick);
    }
  }, [webApp]);
  
  const hideBackButton = useCallback(() => {
    webApp?.BackButton.hide();
  }, [webApp]);
  
  const hapticFeedback = useCallback((type: 'impact' | 'notification' | 'selection', style?: string) => {
    if (webApp?.HapticFeedback) {
      switch (type) {
        case 'impact':
          webApp.HapticFeedback.impactOccurred(style as any || 'medium');
          break;
        case 'notification':
          webApp.HapticFeedback.notificationOccurred(style as any || 'success');
          break;
        case 'selection':
          webApp.HapticFeedback.selectionChanged();
          break;
      }
    }
  }, [webApp]);
  
  return {
    webApp,
    isReady,
    showMainButton,
    hideMainButton,
    showBackButton,
    hideBackButton,
    hapticFeedback
  };
};
```

### 5.2 useSubscriptionLimits.ts

```typescript
interface SubscriptionLimits {
  maxPages: number;
  maxCardsPerPage: number;
  allowedBlockTypes: string[];
  canCreateInternalPages: boolean;
  hasAnalytics: boolean;
}

const useSubscriptionLimits = () => {
  const { user } = useAuthStore();
  
  const limits = useMemo((): SubscriptionLimits => {
    if (user?.subscriptionType === 'pro') {
      return {
        maxPages: -1, // unlimited
        maxCardsPerPage: -1, // unlimited
        allowedBlockTypes: ['vertical_list', 'grid', 'horizontal_scroll', 'feed'],
        canCreateInternalPages: true,
        hasAnalytics: true
      };
    }
    
    return {
      maxPages: 1,
      maxCardsPerPage: 8,
      allowedBlockTypes: ['vertical_list'],
      canCreateInternalPages: false,
      hasAnalytics: false
    };
  }, [user?.subscriptionType]);
  
  const checkCanCreatePage = useCallback((currentPagesCount: number): boolean => {
    return limits.maxPages === -1 || currentPagesCount < limits.maxPages;
  }, [limits.maxPages]);
  
  const checkCanAddCard = useCallback((currentCardsCount: number): boolean => {
    return limits.maxCardsPerPage === -1 || currentCardsCount < limits.maxCardsPerPage;
  }, [limits.maxCardsPerPage]);
  
  const checkCanUseBlockType = useCallback((blockType: string): boolean => {
    return limits.allowedBlockTypes.includes(blockType);
  }, [limits.allowedBlockTypes]);
  
  return {
    limits,
    checkCanCreatePage,
    checkCanAddCard,
    checkCanUseBlockType
  };
};
```

## 6. Routing –∏ Navigation

### 6.1 Router configuration

```typescript
import { createBrowserRouter, RouterProvider } from 'react-router-dom';

const router = createBrowserRouter([
  {
    path: '/',
    element: <Layout />,
    children: [
      {
        index: true,
        element: <Navigate to="/pages" replace />
      },
      {
        path: 'onboarding',
        element: <OnboardingScreen />
      },
      {
        path: 'pages',
        children: [
          {
            index: true,
            element: <PagesListScreen />
          },
          {
            path: 'create',
            element: <PageBuilderScreen />
          },
          {
            path: ':id',
            element: <PageViewScreen />
          },
          {
            path: ':id/edit',
            element: <PageEditScreen />
          }
        ]
      },
      {
        path: 'profile',
        element: <ProfileScreen />
      },
      {
        path: 'subscription',
        element: <SubscriptionScreen />
      }
    ]
  },
  {
    path: '/p/:slug',
    element: <PublicPageView />
  }
]);

const App: React.FC = () => {
  return <RouterProvider router={router} />;
};
```

### 6.2 Navigation —Å Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π

```typescript
const useNavigationWithTelegram = () => {
  const navigate = useNavigate();
  const location = useLocation();
  const { showBackButton, hideBackButton } = useTelegramWebApp();
  
  useEffect(() => {
    const canGoBack = location.key !== 'default';
    
    if (canGoBack) {
      showBackButton(() => {
        navigate(-1);
      });
    } else {
      hideBackButton();
    }
  }, [location, navigate, showBackButton, hideBackButton]);
  
  return { navigate };
};
```

## 7. Forms –∏ Validation

### 7.1 Page creation form

```typescript
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { z } from 'zod';

const pageSchema = z.object({
  title: z.string()
    .min(1, '–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ')
    .max(255, '–ù–∞–∑–≤–∞–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ'),
  description: z.string()
    .max(1000, '–û–ø–∏—Å–∞–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ')
    .optional(),
  blocks: z.array(z.object({
    type: z.enum(['vertical_list', 'grid', 'horizontal_scroll', 'feed']),
    title: z.string().max(255).optional(),
    description: z.string().max(500).optional(),
    cards: z.array(z.object({
      title: z.string().min(1, '–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ').max(255),
      description: z.string().max(500).optional(),
      iconUrl: z.string().url().optional(),
      backgroundImageUrl: z.string().url().optional(),
      linkUrl: z.string().url().optional(),
      linkType: z.enum(['external', 'internal']),
      internalPageId: z.string().uuid().optional()
    })).max(50, '–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∫–∞—Ä—Ç–æ—á–µ–∫')
  }))
});

type PageFormData = z.infer<typeof pageSchema>;

const PageForm: React.FC = () => {
  const { register, handleSubmit, formState: { errors }, watch, setValue } = useForm<PageFormData>({
    resolver: zodResolver(pageSchema),
    defaultValues: {
      title: '',
      description: '',
      blocks: [{
        type: 'vertical_list',
        cards: []
      }]
    }
  });
  
  const onSubmit = async (data: PageFormData) => {
    try {
      await createPage(data);
      navigate('/pages');
    } catch (error) {
      console.error('Error creating page:', error);
    }
  };
  
  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      {/* Form fields */}
    </form>
  );
};
```

## 8. Performance Optimization

### 8.1 Code Splitting

```typescript
// Lazy loading —Å—Ç—Ä–∞–Ω–∏—Ü
const OnboardingScreen = lazy(() => import('./pages/OnboardingScreen'));
const PageBuilderScreen = lazy(() => import('./pages/PageBuilderScreen'));
const PageViewScreen = lazy(() => import('./pages/PageViewScreen'));

// Suspense wrapper
const AppRouter: React.FC = () => {
  return (
    <Suspense fallback={<FullPageLoader />}>
      <RouterProvider router={router} />
    </Suspense>
  );
};
```

### 8.2 Image Optimization

```typescript
interface OptimizedImageProps {
  src: string;
  alt: string;
  className?: string;
  fallback?: string;
}

const OptimizedImage: React.FC<OptimizedImageProps> = ({
  src,
  alt,
  className,
  fallback = '/placeholder.svg'
}) => {
  const [imgSrc, setImgSrc] = useState(fallback);
  const [isLoading, setIsLoading] = useState(true);
  
  useEffect(() => {
    const img = new Image();
    img.onload = () => {
      setImgSrc(src);
      setIsLoading(false);
    };
    img.onerror = () => {
      setImgSrc(fallback);
      setIsLoading(false);
    };
    img.src = src;
  }, [src, fallback]);
  
  return (
    <div className={cn('image-container', className)}>
      {isLoading && <Skeleton className="w-full h-full" />}
      <img
        src={imgSrc}
        alt={alt}
        className={cn('image', { 'opacity-0': isLoading })}
        loading="lazy"
      />
    </div>
  );
};
```

## 9. Error Handling

### 9.1 Error Boundary

```typescript
interface ErrorBoundaryState {
  hasError: boolean;
  error: Error | null;
}

class ErrorBoundary extends Component<PropsWithChildren, ErrorBoundaryState> {
  constructor(props: PropsWithChildren) {
    super(props);
    this.state = { hasError: false, error: null };
  }
  
  static getDerivedStateFromError(error: Error): ErrorBoundaryState {
    return { hasError: true, error };
  }
  
  componentDidCatch(error: Error, errorInfo: ErrorInfo) {
    console.error('Error caught by boundary:', error, errorInfo);
    
    // –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—à–∏–±–∫–∏ –≤ —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
    if (window.Telegram?.WebApp?.sendData) {
      window.Telegram.WebApp.sendData(JSON.stringify({
        type: 'error',
        error: error.message,
        stack: error.stack,
        componentStack: errorInfo.componentStack
      }));
    }
  }
  
  render() {
    if (this.state.hasError) {
      return (
        <ErrorFallback 
          error={this.state.error}
          resetError={() => this.setState({ hasError: false, error: null })}
        />
      );
    }
    
    return this.props.children;
  }
}

interface ErrorFallbackProps {
  error: Error | null;
  resetError: () => void;
}

const ErrorFallback: React.FC<ErrorFallbackProps> = ({ error, resetError }) => {
  const { hapticFeedback } = useTelegramWebApp();
  
  const handleRetry = () => {
    hapticFeedback('impact', 'light');
    resetError();
  };
  
  return (
    <div className="error-fallback">
      <div className="error-icon">
        <AlertCircle size={48} />
      </div>
      <h2>–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫</h2>
      <p>–ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.</p>
      {error && (
        <details className="error-details">
          <summary>–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –æ—à–∏–±–∫–∏</summary>
          <pre>{error.message}</pre>
        </details>
      )}
      <Button onClick={handleRetry} variant="primary">
        –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
      </Button>
    </div>
  );
};
```

### 9.2 API Error Handling

```typescript
interface ApiError {
  message: string;
  code: string;
  status: number;
  details?: any;
}

const useErrorHandler = () => {
  const { hapticFeedback } = useTelegramWebApp();
  
  const handleError = useCallback((error: unknown) => {
    hapticFeedback('notification', 'error');
    
    if (error instanceof ApiError) {
      switch (error.code) {
        case 'SUBSCRIPTION_REQUIRED':
          toast.error('–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –≤ Pro –≤–µ—Ä—Å–∏–∏');
          break;
        case 'LIMIT_EXCEEDED':
          toast.error('–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –¥–ª—è –≤–∞—à–µ–≥–æ —Ç–∞—Ä–∏—Ñ–∞');
          break;
        case 'UNAUTHORIZED':
          toast.error('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É');
          // Redirect to auth
          break;
        default:
          toast.error(error.message || '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞');
      }
    } else {
      toast.error('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞');
    }
  }, [hapticFeedback]);
  
  return { handleError };
};
```

## 10. Testing

### 10.1 Component Tests

```typescript
// __tests__/components/Button.test.tsx
import { render, screen, fireEvent } from '@testing-library/react';
import { Button } from '../components/ui/Button';

describe('Button', () => {
  test('renders button with text', () => {
    render(<Button>Click me</Button>);
    expect(screen.getByRole('button')).toHaveTextContent('Click me');
  });
  
  test('calls onClick when clicked', () => {
    const handleClick = jest.fn();
    render(<Button onClick={handleClick}>Click me</Button>);
    
    fireEvent.click(screen.getByRole('button'));
    expect(handleClick).toHaveBeenCalledTimes(1);
  });
  
  test('disables button when loading', () => {
    render(<Button isLoading>Click me</Button>);
    expect(screen.getByRole('button')).toBeDisabled();
  });
});
```

### 10.2 Hook Tests

```typescript
// __tests__/hooks/useTelegramWebApp.test.ts
import { renderHook } from '@testing-library/react';
import { useTelegramWebApp } from '../hooks/useTelegramWebApp';

// Mock Telegram WebApp
const mockTelegram = {
  WebApp: {
    ready: jest.fn(),
    expand: jest.fn(),
    themeParams: {
      bg_color: '#ffffff',
      text_color: '#000000'
    },
    MainButton: {
      setText: jest.fn(),
      show: jest.fn(),
      hide: jest.fn(),
      onClick: jest.fn()
    }
  }
};

Object.defineProperty(window, 'Telegram', {
  value: mockTelegram,
  writable: true
});

describe('useTelegramWebApp', () => {
  test('initializes Telegram WebApp', () => {
    const { result } = renderHook(() => useTelegramWebApp());
    
    expect(mockTelegram.WebApp.ready).toHaveBeenCalled();
    expect(mockTelegram.WebApp.expand).toHaveBeenCalled();
    expect(result.current.isReady).toBe(true);
  });
});
```

## 11. Styling –∏ UI

### 11.1 Tailwind CSS Configuration

```typescript
// tailwind.config.js
module.exports = {
  content: ['./src/**/*.{js,ts,jsx,tsx}'],
  theme: {
    extend: {
      colors: {
        // Telegram theme colors (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è)
        'tg-bg': 'var(--tg-theme-bg-color, #ffffff)',
        'tg-text': 'var(--tg-theme-text-color, #000000)',
        'tg-hint': 'var(--tg-theme-hint-color, #999999)',
        'tg-link': 'var(--tg-theme-link-color, #2481cc)',
        'tg-button': 'var(--tg-theme-button-color, #2481cc)',
        'tg-button-text': 'var(--tg-theme-button-text-color, #ffffff)',
        
        // App colors
        primary: {
          50: '#eff6ff',
          500: '#3b82f6',
          600: '#2563eb',
          700: '#1d4ed8'
        },
        gray: {
          50: '#f9fafb',
          100: '#f3f4f6',
          500: '#6b7280',
          900: '#111827'
        }
      },
      fontFamily: {
        sans: ['SF Pro Display', 'system-ui', 'sans-serif']
      },
      spacing: {
        'safe-top': 'env(safe-area-inset-top)',
        'safe-bottom': 'env(safe-area-inset-bottom)'
      },
      animation: {
        'slide-up': 'slideUp 0.3s ease-out',
        'fade-in': 'fadeIn 0.2s ease-out',
        'bounce-in': 'bounceIn 0.4s ease-out'
      }
    }
  },
  plugins: [
    require('@tailwindcss/forms'),
    require('@tailwindcss/typography')
  ]
};
```

### 11.2 CSS Modules –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```scss
// components/cards/VerticalListCard.module.scss
.card {
  @apply bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-700;
  @apply transition-all duration-200 active:scale-98;
  @apply hover:shadow-md hover:border-gray-300;
  
  &:active {
    @apply bg-gray-50 dark:bg-gray-750;
  }
}

.cardContent {
  @apply flex items-start space-x-3;
}

.cardIcon {
  @apply w-10 h-10 rounded-lg bg-gray-100 dark:bg-gray-700 flex items-center justify-center flex-shrink-0;
  
  img {
    @apply w-6 h-6 object-cover;
  }
}

.cardText {
  @apply flex-1 min-w-0;
}

.cardTitle {
  @apply text-base font-semibold text-tg-text mb-1 line-clamp-2;
}

.cardDescription {
  @apply text-sm text-tg-hint line-clamp-2;
}

.cardActions {
  @apply flex space-x-2 opacity-0 transition-opacity;
  
  .card:hover & {
    @apply opacity-100;
  }
}

// Responsive adjustments
@media (max-width: 640px) {
  .card {
    @apply p-3;
  }
  
  .cardIcon {
    @apply w-8 h-8;
    
    img {
      @apply w-5 h-5;
    }
  }
  
  .cardTitle {
    @apply text-sm;
  }
  
  .cardDescription {
    @apply text-xs;
  }
}
```

## 12. Accessibility

### 12.1 ARIA –∏ —Å–µ–º–∞–Ω—Ç–∏–∫–∞

```typescript
// –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
const AccessibleCard: React.FC<CardProps> = ({
  title,
  description,
  onClick,
  isSelected
}) => {
  return (
    <div
      role="button"
      tabIndex={0}
      aria-pressed={isSelected}
      aria-label={`${title}. ${description}`}
      className="card"
      onClick={onClick}
      onKeyDown={(e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          onClick();
        }
      }}
    >
      <h3 id={`card-title-${id}`}>{title}</h3>
      <p aria-describedby={`card-title-${id}`}>{description}</p>
    </div>
  );
};
```

### 12.2 Focus management

```typescript
const useFocusManagement = () => {
  const focusElementRef = useRef<HTMLElement | null>(null);
  
  const setFocusElement = useCallback((element: HTMLElement | null) => {
    focusElementRef.current = element;
  }, []);
  
  const restoreFocus = useCallback(() => {
    if (focusElementRef.current) {
      focusElementRef.current.focus();
    }
  }, []);
  
  return { setFocusElement, restoreFocus };
};
```

## 13. Deployment

### 13.1 Vercel Configuration

```json
// vercel.json
{
  "framework": "vite",
  "buildCommand": "npm run build",
  "outputDirectory": "dist",
  "installCommand": "npm install",
  "devCommand": "npm run dev",
  "env": {
    "VITE_API_URL": "@api-url",
    "VITE_TELEGRAM_BOT_USERNAME": "@telegram-bot-username"
  },
  "build": {
    "env": {
      "VITE_API_URL": "@api-url-production",
      "VITE_TELEGRAM_BOT_USERNAME": "@telegram-bot-username-production"
    }
  },
  "headers": [
    {
      "source": "/(.*)",
      "headers": [
        {
          "key": "X-Frame-Options",
          "value": "ALLOWALL"
        },
        {
          "key": "Content-Security-Policy",
          "value": "frame-ancestors https://web.telegram.org https://t.me"
        }
      ]
    }
  ],
  "rewrites": [
    {
      "source": "/p/:slug",
      "destination": "/index.html"
    }
  ]
}
```

### 13.2 Environment Variables

```typescript
// src/config/env.ts
interface Config {
  apiUrl: string;
  telegramBotUsername: string;
  isDevelopment: boolean;
  isProduction: boolean;
}

export const config: Config = {
  apiUrl: import.meta.env.VITE_API_URL || 'http://localhost:3000/api',
  telegramBotUsername: import.meta.env.VITE_TELEGRAM_BOT_USERNAME || 'navigapp_bot',
  isDevelopment: import.meta.env.DEV,
  isProduction: import.meta.env.PROD
};

// –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
if (!config.apiUrl) {
  throw new Error('VITE_API_URL is required');
}

if (!config.telegramBotUsername) {
  throw new Error('VITE_TELEGRAM_BOT_USERNAME is required');
}
```

## 14. Monitoring –∏ Analytics

### 14.1 Performance Monitoring

```typescript
// src/utils/performance.ts
export const trackPageLoad = (pageName: string) => {
  const startTime = performance.now();
  
  return () => {
    const loadTime = performance.now() - startTime;
    
    // –û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ—Ç—Ä–∏–∫ –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫—É
    if (window.Telegram?.WebApp?.sendData) {
      window.Telegram.WebApp.sendData(JSON.stringify({
        type: 'performance',
        page: pageName,
        loadTime: Math.round(loadTime),
        timestamp: Date.now()
      }));
    }
  };
};

export const trackUserInteraction = (action: string, element: string) => {
  if (window.Telegram?.WebApp?.sendData) {
    window.Telegram.WebApp.sendData(JSON.stringify({
      type: 'interaction',
      action,
      element,
      timestamp: Date.now()
    }));
  }
};
```

### 14.2 Error Tracking

```typescript
// src/utils/errorTracking.ts
export const trackError = (error: Error, context?: any) => {
  const errorData = {
    type: 'error',
    message: error.message,
    stack: error.stack,
    context,
    url: window.location.href,
    userAgent: navigator.userAgent,
    timestamp: Date.now()
  };
  
  if (window.Telegram?.WebApp?.sendData) {
    window.Telegram.WebApp.sendData(JSON.stringify(errorData));
  }
  
  console.error('Tracked error:', errorData);
};
```

## 15. –§–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 15.1 Code Quality

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ESLint –∏ Prettier –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–≥–æ –∫–æ–¥–∞
- Husky hooks –¥–ª—è pre-commit –ø—Ä–æ–≤–µ—Ä–æ–∫
- TypeScript strict mode –¥–ª—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- Jest –¥–ª—è unit —Ç–µ—Å—Ç–æ–≤ –∏ React Testing Library –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

### 15.2 Performance Best Practices

- Lazy loading –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- Memoization –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
- Virtual scrolling –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤
- Service Worker –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

### 15.3 Security Considerations

- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è HTML –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- CSP headers –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç XSS
- –ü—Ä–æ–≤–µ—Ä–∫–∞ origin –¥–ª—è Telegram WebApp

---

*–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Frontend —á–∞—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ù–∞–≤–∏–≥–∞–ø–ø —Å —É—á–µ—Ç–æ–º —Å–ø–µ—Ü–∏—Ñ–∏–∫–∏ Telegram Mini Apps.*