# Navigapp

**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞:** üöÄ **Phase 1 - –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞**

Telegram Mini App –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –≤–Ω—É—Ç—Ä–∏ –∫–∞–Ω–∞–ª–æ–≤, –≥—Ä—É–ø–ø –∏ —á–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∏ –º–µ–Ω—é.

## üéØ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

‚úÖ **–ó–∞–≤–µ—Ä—à–µ–Ω–æ (Phase 1 - –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞):**
- –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞
- React frontend —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ Vercel —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Telegram WebApp
- Supabase Edge Functions API —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
- PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–ª–Ω–æ–π —Å—Ö–µ–º–æ–π (Prisma ORM)
- Telegram bot @Navigapp_bot –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –§—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—â–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π pipeline –¥–µ–ø–ª–æ—è –¥–ª—è Edge Functions
- –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã

üöß **–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ (Phase 2 - –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª):**
- UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü
- –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ –∏ –±–ª–æ–∫–∞–º–∏
- –ü—É–±–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–æ–∫ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π

## üåê –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

**–§—Ä–æ–Ω—Ç–µ–Ω–¥ (Vercel):** https://navigapp.vercel.app
**API (Supabase Edge Functions):** https://zcvaxzakzkszoxienepi.supabase.co/functions/v1/navigapp-api
**Telegram Bot:** [@Navigapp_bot](https://t.me/Navigapp_bot)

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ frontend/         # React Mini App (Vite + TypeScript) - —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ Vercel
‚îú‚îÄ‚îÄ supabase/         # Edge Functions API - —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ Supabase
‚îÇ   ‚îî‚îÄ‚îÄ functions/
‚îÇ       ‚îî‚îÄ‚îÄ navigapp-api/    # Main API endpoint
‚îú‚îÄ‚îÄ backend/          # Prisma —Å—Ö–µ–º–∞ –∏ migrations
‚îú‚îÄ‚îÄ shared/           # –û–±—â–∏–µ —Ç–∏–ø—ã –∏ —É—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ docs/             # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ .github/          # GitHub Actions –¥–ª—è CI/CD
‚îî‚îÄ‚îÄ deploy-functions.sh   # –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è
```

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Frontend (React Telegram WebApp)
- **Framework:** React 18 + TypeScript + Vite
- **Styling:** Tailwind CSS
- **State Management:** Zustand
- **Telegram Integration:** @twa-dev/sdk
- **Routing:** React Router 6
- **Forms:** React Hook Form + Zod validation
- **Icons:** Lucide React
- **Animations:** Framer Motion
- **Deployment:** Vercel

### Backend (Supabase Edge Functions)
- **Runtime:** Deno (Supabase Edge Functions)
- **API Style:** RESTful endpoints
- **Database:** PostgreSQL (Supabase)
- **ORM:** Prisma (–¥–ª—è —Å—Ö–µ–º—ã –∏ –º–∏–≥—Ä–∞—Ü–∏–π)
- **Authentication:** Telegram WebApp validation
- **CORS:** –ù–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è Telegram WebApp
- **Deployment:** Supabase

### Database Schema
- **Users:** Telegram ID, subscription info, preferences
- **Pages:** Navigation pages with hierarchy support
- **PageBlocks:** Different block types (list, grid, feed)
- **BlockCards:** Individual navigation cards
- **Analytics:** View/click tracking
- **Subscriptions & Payments:** T-Bank integration ready

### DevOps & Infrastructure
- **Deployment:** Automated via GitHub Actions + scripts
- **Frontend:** Vercel with CSP headers for Telegram
- **Backend:** Supabase Edge Functions
- **Database:** Supabase PostgreSQL
- **Environment:** Production configuration ready

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
   ```bash
   git clone https://github.com/yourusername/navigapp
   cd navigapp
   ```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   # Shared types
   cd shared && npm install && npm run build

   # Frontend
   cd ../frontend && npm install
   ```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```bash
   # –°–∫–æ–ø–∏—Ä—É–π—Ç–µ .env.local –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ frontend/.env.local
   cp .env.local frontend/.env.local
   ```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:**
   ```bash
   cd frontend && npm run dev
   ```

5. **–û—Ç–∫—Ä–æ–π—Ç–µ –≤ Telegram Web –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –º–æ–±–∏–ª—å–Ω–æ–º Telegram**

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Telegram

1. **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å ngrok:**
   ```bash
   # –í –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
   ngrok http 5173
   # –û–±–Ω–æ–≤–∏—Ç–µ URL –≤ @BotFather –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   ```

2. **Production —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ [@Navigapp_bot](https://t.me/Navigapp_bot)
   - –ù–∞–∂–º–∏—Ç–µ "–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **[–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ](docs/navigapp_prd.md)** - –ü–æ–ª–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø—Ä–æ–¥—É–∫—Ç—É
- **[Backend API Guide](docs/backend.md)** - API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **[Frontend Development](docs/frontend.md)** - React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **[Deployment Guide](DEPLOYMENT.md)** - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **[Telegram Mini App Setup](docs/telegram-miniapp-setup.md)** - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–∞
- **[Edge Functions Deployment](docs/edge-functions-deployment.md)** - –î–µ–ø–ª–æ–π –Ω–∞ Supabase

## üîß API Endpoints (—Ç–µ–∫—É—â–∏–µ)

**Base URL:** `https://zcvaxzakzkszoxienepi.supabase.co/functions/v1/navigapp-api`

- `GET /` - API –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- `GET /health` - Health check
- `POST /auth/telegram` - Telegram WebApp –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `GET /pages` - –ü–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∑–∞–≥–ª—É—à–∫–∞)
- `POST /pages` - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (–∑–∞–≥–ª—É—à–∫–∞)

## üöÄ Roadmap

### Phase 2 - –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
- [ ] UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü
- [ ] Page Builder wizard
- [ ] –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏
- [ ] –ü—É–±–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (/p/:slug)
- [ ] –ë–∞–∑–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### Phase 3 - –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- [ ] Pro –ø–æ–¥–ø–∏—Å–∫–∞ –∏ –ø–ª–∞—Ç–µ–∂–∏ (T-Bank)
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- [ ] –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–∏–ø—ã –±–ª–æ–∫–æ–≤
- [ ] –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç
- [ ] –ö–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–±–æ—Ç–∞

### Phase 4 - –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] API –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- [ ] White-label —Ä–µ—à–µ–Ω–∏—è
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- [ ] –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- Telegram WebApp authentication validation
- CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è Telegram –¥–æ–º–µ–Ω–æ–≤
- CSP headers –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç XSS
- Environment variables –¥–ª—è sensitive –¥–∞–Ω–Ω—ã—Ö
- Rate limiting –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤ Phase 2

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

---

**–ù–∞–≤–∏–≥–∞–ø–ø** - —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —É–¥–æ–±–Ω—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é –¥–ª—è –≤–∞—à–∏—Ö Telegram –∫–∞–Ω–∞–ª–æ–≤ –∏ –≥—Ä—É–ø–ø!